<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--  <meta charset="UTF-8">-->
<!--  <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--  <title>{{ university.name }} - CollegeClue</title>-->
<!--  <script src="https://cdn.tailwindcss.com"></script>-->
<!--  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">-->
<!--  <style>-->
<!--    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap');-->

<!--    /* Consistent Body Styles */-->
<!--    body {-->
<!--      font-family: 'Poppins', sans-serif;-->
<!--      margin: 0;-->
<!--      padding: 0;-->
<!--      color: #e0e0e0;-->
<!--      font-weight: 500;-->
<!--      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 30%, #0f3460 70%, #533483 100%);-->
<!--      min-height: 100vh;-->
<!--    }-->

<!--    /* Consistent Navigation Styles */-->
<!--    .nav-bar {-->
<!--        background-color: rgba(30, 41, 59, 0.95);-->
<!--        -webkit-backdrop-filter: blur(8px);-->
<!--        backdrop-filter: blur(8px);-->
<!--        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);-->
<!--        border-bottom: 1px solid rgba(75, 85, 99, 1);-->
<!--    }-->

<!--    /* Custom Button Styles */-->
<!--    .btn-primary {-->
<!--        background: linear-gradient(135deg, #2d3748 0%, #4a5568 50%, #1a202c 100%);-->
<!--        background-size: 200% 200%;-->
<!--        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);-->
<!--        position: relative;-->
<!--        overflow: hidden;-->
<!--        border-radius: 0.625rem;-->
<!--        display: inline-flex;-->
<!--        align-items: center;-->
<!--        justify-content: center;-->
<!--        color: white;-->
<!--    }-->

<!--    .btn-primary::before {-->
<!--        content: '';-->
<!--        position: absolute;-->
<!--        top: 0;-->
<!--        left: -100%;-->
<!--        width: 100%;-->
<!--        height: 100%;-->
<!--        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);-->
<!--        transition: left 0.6s;-->
<!--    }-->

<!--    .btn-primary:hover::before {-->
<!--        left: 100%;-->
<!--    }-->

<!--    .btn-primary:hover {-->
<!--        background-position: 100% 0;-->
<!--        transform: translateY(-3px) scale(1.05);-->
<!--        box-shadow: 0 15px 35px rgba(45, 55, 72, 0.4);-->
<!--    }-->

<!--    /* Input/Select styling for dark theme */-->
<!--    .dark-input {-->
<!--        background-color: #2d3748;-->
<!--        color: #e0e0e0;-->
<!--        border: 1px solid #4a5568;-->
<!--        padding: 0.5rem 0.75rem;-->
<!--        border-radius: 0.375rem;-->
<!--    }-->
<!--    .dark-input:focus {-->
<!--        outline: none;-->
<!--        border-color: #667eea;-->
<!--        box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.5);-->
<!--    }-->

<!--    /* Accordion Custom Styles */-->
<!--    .accordion-section {-->
<!--        background: #2d3748;-->
<!--        border-radius: 0.75rem;-->
<!--        margin-bottom: 1rem;-->
<!--        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);-->
<!--        border: 1px solid #4a5568;-->
<!--        overflow: hidden;-->
<!--        transition: transform 0.2s ease, box-shadow 0.2s ease;-->
<!--    }-->

<!--    .accordion-section:hover {-->
<!--        transform: translateY(-5px);-->
<!--        box-shadow: 0 15px 25px -5px rgba(0, 0, 0, 0.2), 0 6px 10px -3px rgba(0, 0, 0, 0.1);-->
<!--    }-->

<!--    .accordion-header {-->
<!--        padding: 1rem 1.5rem;-->
<!--        cursor: pointer;-->
<!--        font-weight: 600;-->
<!--        color: #ffffff;-->
<!--        background-color: #1a202c;-->
<!--        border-bottom: 1px solid #4a5568;-->
<!--        user-select: none;-->
<!--        transition: background-color 0.3s ease;-->
<!--        display: flex;-->
<!--        justify-content: space-between;-->
<!--        align-items: center;-->
<!--        font-size: 1.125rem;-->
<!--    }-->

<!--    .accordion-header:hover {-->
<!--        background-color: #2d3748;-->
<!--    }-->

<!--    .accordion-header.open .accordion-icon {-->
<!--        transform: rotate(90deg);-->
<!--    }-->

<!--    .accordion-icon {-->
<!--        transition: transform 0.3s ease;-->
<!--        font-size: 1.5rem;-->
<!--        line-height: 1;-->
<!--    }-->

<!--    .accordion-content {-->
<!--        padding: 1rem 1.5rem;-->
<!--        display: none;-->
<!--        color: #e0e0e0;-->
<!--    }-->

<!--    /* Styles for lists inside accordions */-->
<!--    .accordion-content ul {-->
<!--      padding-left: 1.25rem;-->
<!--      list-style-type: disc;-->
<!--      margin: 0;-->
<!--    }-->
<!--    .accordion-content li {-->
<!--        margin-bottom: 0.5rem;-->
<!--    }-->
<!--    .accordion-content li:last-child {-->
<!--        margin-bottom: 0;-->
<!--    }-->

<!--    .pg, .review {-->
<!--      padding: 1rem;-->
<!--      background-color: #1a202c;-->
<!--      border: 1px solid #2d3748;-->
<!--      border-radius: 0.5rem;-->
<!--      margin-top: 1rem;-->
<!--      color: #e0e0e0;-->
<!--    }-->

<!--    .pg strong, .review strong {-->
<!--        color: #ffffff;-->
<!--    }-->
<!--    .pg ul {-->
<!--      list-style-type: none;-->
<!--      padding-left: 0;-->
<!--      margin-top: 0.5rem;-->
<!--    }-->
<!--    .pg ul li {-->
<!--        margin-bottom: 0.25rem;-->
<!--    }-->

<!--    .map-link {-->
<!--        display: inline-block;-->
<!--        margin-top: 0.75rem;-->
<!--        padding: 0.5rem 1rem;-->
<!--        background-color: #667eea;-->
<!--        color: white;-->
<!--        border-radius: 0.375rem;-->
<!--        text-decoration: none;-->
<!--        transition: background-color 0.3s ease;-->
<!--        font-weight: 600;-->
<!--    }-->

<!--    .map-link:hover {-->
<!--        background-color: #764ba2;-->
<!--    }-->

<!--    a {-->
<!--      color: #667eea;-->
<!--      text-decoration: none;-->
<!--    }-->

<!--    a:hover {-->
<!--      text-decoration: underline;-->
<!--    }-->

<!--    /* University Title */-->
<!--    .university-title {-->
<!--        font-weight: 800;-->
<!--        text-shadow: 0 4px 8px rgba(0,0,0,0.3);-->
<!--    }-->

<!--    /* WhatsApp Button Styles */-->
<!--    .whatsapp-button {-->
<!--        position: fixed;-->
<!--        bottom: 20px;-->
<!--        right: 20px;-->
<!--        background-color: #25D366;-->
<!--        color: white;-->
<!--        border-radius: 50%;-->
<!--        width: 60px;-->
<!--        height: 60px;-->
<!--        display: flex;-->
<!--        align-items: center;-->
<!--        justify-content: center;-->
<!--        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);-->
<!--        transition: transform 0.3s ease, box-shadow 0.3s ease;-->
<!--        z-index: 1000;-->
<!--        text-decoration: none;-->
<!--    }-->

<!--    .whatsapp-button:hover {-->
<!--        transform: scale(1.1);-->
<!--        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);-->
<!--    }-->

<!--    .whatsapp-button img {-->
<!--        width: 35px;-->
<!--        height: 35px;-->
<!--    }-->

<!--    /* Wishlist Button Styles */-->
<!--    #wishlist-btn {-->
<!--        background: linear-gradient(135deg, #e05e5e 0%, #d43f3f 100%);-->
<!--        color: white;-->
<!--        padding: 0.75rem 1.5rem;-->
<!--        border-radius: 0.625rem;-->
<!--        font-weight: 600;-->
<!--        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;-->
<!--        display: flex;-->
<!--        align-items: center;-->
<!--        gap: 0.5rem;-->
<!--        box-shadow: 0 4px 6px rgba(0,0,0,0.2);-->
<!--        cursor: pointer;-->
<!--        border: none;-->
<!--    }-->
<!--    #wishlist-btn:hover {-->
<!--        transform: translateY(-2px) scale(1.03);-->
<!--        box-shadow: 0 8px 12px rgba(0,0,0,0.3);-->
<!--    }-->
<!--    #wishlist-btn:active {-->
<!--        animation: click-pop 0.15s ease-in-out;-->
<!--    }-->
<!--    #wishlist-btn .fa-heart {-->
<!--        font-size: 1.25rem;-->
<!--        transition: transform 0.2s ease-in-out;-->
<!--    }-->
<!--    #wishlist-btn.wished .fa-heart {-->
<!--        transform: scale(1.1);-->
<!--    }-->

<!--    @keyframes click-pop {-->
<!--        0% { transform: scale(1); }-->
<!--        50% { transform: scale(0.95); }-->
<!--        100% { transform: scale(1); }-->
<!--    }-->

<!--    .top-section-header {-->
<!--      display: flex;-->
<!--      flex-direction: column;-->
<!--      align-items: center;-->
<!--      justify-content: center;-->
<!--      margin-bottom: 2rem;-->
<!--      gap: 1.5rem;-->
<!--    }-->

<!--    @media (min-width: 768px) {-->
<!--      .top-section-header {-->
<!--        flex-direction: row;-->
<!--        justify-content: space-between;-->
<!--      }-->
<!--    }-->

<!--    .university-info {-->
<!--      display: flex;-->
<!--      flex-direction: column;-->
<!--      align-items: center;-->
<!--      text-align: center;-->
<!--    }-->

<!--    .loading-spinner {-->
<!--      display: inline-block;-->
<!--      width: 16px;-->
<!--      height: 16px;-->
<!--      border: 2px solid #ffffff;-->
<!--      border-radius: 50%;-->
<!--      border-top-color: transparent;-->
<!--      animation: spin 1s linear infinite;-->
<!--    }-->

<!--    @keyframes spin {-->
<!--      to { transform: rotate(360deg); }-->
<!--    }-->

<!--    /* -&#45;&#45; NEW: DEADLINE COUNTDOWN STYLES -&#45;&#45; */-->
<!--    .deadline-container {-->
<!--        background: rgba(15, 52, 96, 0.6); /* #0f3460 with transparency */-->
<!--        border: 1px solid #4a5568;-->
<!--        border-radius: 0.75rem;-->
<!--        padding: 1.5rem;-->
<!--        margin-bottom: 2rem;-->
<!--        text-align: center;-->
<!--        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);-->
<!--        backdrop-filter: blur(5px);-->
<!--        animation: fadeIn 1s ease-out;-->
<!--    }-->

<!--    .deadline-title {-->
<!--        font-size: 1.25rem;-->
<!--        font-weight: 600;-->
<!--        color: #e0e0e0;-->
<!--        margin-bottom: 1rem;-->
<!--        display: flex;-->
<!--        align-items: center;-->
<!--        justify-content: center;-->
<!--        gap: 0.5rem;-->
<!--    }-->

<!--    .countdown-timer {-->
<!--        display: flex;-->
<!--        justify-content: center;-->
<!--        gap: 1rem;-->
<!--    }-->

<!--    .time-block {-->
<!--        display: flex;-->
<!--        flex-direction: column;-->
<!--        align-items: center;-->
<!--        background-color: #1a202c;-->
<!--        padding: 0.75rem 1rem;-->
<!--        border-radius: 0.5rem;-->
<!--        min-width: 70px;-->
<!--        box-shadow: inset 0 2px 4px rgba(0,0,0,0.5);-->
<!--        transition: transform 0.3s ease, box-shadow 0.3s ease;-->
<!--    }-->

<!--    .time-block:hover {-->
<!--        transform: translateY(-5px);-->
<!--        box-shadow: 0 8px 15px rgba(0,0,0,0.3);-->
<!--    }-->

<!--    .time-value {-->
<!--        font-size: 2.25rem;-->
<!--        font-weight: 700;-->
<!--        color: #ffffff;-->
<!--        line-height: 1.2;-->
<!--    }-->

<!--    .time-label {-->
<!--        font-size: 0.875rem;-->
<!--        font-weight: 500;-->
<!--        color: #a0aec0;-->
<!--        text-transform: uppercase;-->
<!--    }-->

<!--    .deadline-passed {-->
<!--        font-size: 1.5rem;-->
<!--        font-weight: 700;-->
<!--        color: #e53e3e; /* Red for emphasis */-->
<!--        animation: pulse 1.5s infinite;-->
<!--    }-->

<!--    @keyframes fadeIn {-->
<!--        from { opacity: 0; transform: translateY(20px); }-->
<!--        to { opacity: 1; transform: translateY(0); }-->
<!--    }-->

<!--    @keyframes pulse {-->
<!--        0%, 100% { transform: scale(1); }-->
<!--        50% { transform: scale(1.05); }-->
<!--    }-->
<!--    /* -&#45;&#45; END OF NEW STYLES -&#45;&#45; */-->

<!--  </style>-->
<!--</head>-->
<!--<body class="page-gradient-bg">-->

<!--<nav class="nav-bar h-16 flex items-center justify-between px-4 sm:px-6 lg:px-8">-->
<!--    <div class="flex items-center">-->
<!--        <h1 class="text-2xl font-bold text-white">CollegeClue</h1>-->
<!--    </div>-->
<!--    <div class="flex items-center space-x-4">-->
<!--        <a href="/my-wishlists" class="text-white text-xl md:text-2xl" title="My Wishlists">-->
<!--          <i class="fa-solid fa-heart"></i>-->
<!--        </a>-->
<!--    </div>-->
<!--</nav>-->

<!--<div class="max-w-4xl mx-auto px-4 py-8">-->
<!--    <div class="top-section-header">-->
<!--        <div class="university-info">-->
<!--            <img src="{{ university.image_url }}" alt="{{ university.name }}" class="w-28 h-28 rounded-full object-cover shadow-lg border-2 border-white mb-4">-->
<!--            <h2 class="text-4xl sm:text-5xl university-title text-white text-center">{{ university.name }}</h2>-->
<!--        </div>-->
<!--        <div>-->
<!--            {% if user.is_authenticated %}-->
<!--                <button id="wishlist-btn" data-university-id="{{ university.pk }}">-->
<!--                    <span id="wishlist-icon"><i class="fa-regular fa-heart"></i></span>-->
<!--                    <span id="wishlist-text">Add to Wishlist</span>-->
<!--                </button>-->
<!--            {% else %}-->
<!--                <a href="{% url 'account_login' %}" class="btn-primary py-3 px-6 font-bold">-->
<!--                    Login to Add to Wishlist-->
<!--                </a>-->
<!--            {% endif %}-->
<!--        </div>-->
<!--    </div>-->

<!--    {% csrf_token %}-->

<!--    {% if university.registration_deadline %}-->
<!--    <div class="deadline-container" data-deadline="{{ university.registration_deadline|date:'c' }}">-->
<!--      <div class="deadline-title">-->
<!--        <i class="fa-solid fa-hourglass-half"></i>-->
<!--        <span>Registration Closes In</span>-->
<!--      </div>-->
<!--      <div id="countdown" class="countdown-timer">-->
<!--        </div>-->
<!--    </div>-->
<!--    {% endif %}-->
<!--    <div class="accordion-section">-->
<!--      <div class="accordion-header">-->
<!--        Basic Info-->
<!--        <span class="accordion-icon">+</span>-->
<!--      </div>-->
<!--      <div class="accordion-content">-->
<!--        <ul>-->
<!--          <li><strong>Location:</strong> {{ university.location }}</li>-->
<!--          <li><strong>Accreditation:</strong> {{ university.accreditation }}</li>-->
<!--          <li><strong>Type:</strong> {{ university.type }}</li>-->
<!--          <li><strong>Campus Size:</strong> {{ university.campus_size }}</li>-->
<!--          <li><strong>Tuition:</strong> {{ university.tuition }}</li>-->
<!--          <li><strong>Established:</strong> {{ university.established_year }}</li>-->
<!--          <li><strong>Undergraduate Enrollment:</strong> {{ university.undergraduate_enrollment }}</li>-->
<!--          <li><strong>Graduate Enrollment:</strong> {{ university.graduate_enrollment }}</li>-->
<!--          <li><strong>Average Salary:</strong> {{ university.average_salary }}</li>-->
<!--          <li><strong>Study Abroad Programs:</strong> {{ university.study_abroad_programs|yesno:"Yes,No" }}</li>-->
<!--          <li><strong>Financial Aid Available:</strong> {{ university.financial_aid_available|yesno:"Yes,No" }}</li>-->
<!--          <li><strong>Website:</strong> <a href="{{ university.website }}" target="_blank">{{ university.website }}</a></li>-->
<!--        </ul>-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="accordion-section">-->
<!--      <div class="accordion-header">-->
<!--        Courses Offered-->
<!--        <span class="accordion-icon">+</span>-->
<!--      </div>-->
<!--      <div class="accordion-content">-->
<!--        <ul>-->
<!--          {% for course in university.courses.all %}-->
<!--            <li>{{ course.course_name }}</li>-->
<!--          {% empty %}-->
<!--            <li class="text-gray-400">No courses listed.</li>-->
<!--          {% endfor %}-->
<!--        </ul>-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="accordion-section">-->
<!--      <div class="accordion-header">-->
<!--        Campus Facilities-->
<!--        <span class="accordion-icon">+</span>-->
<!--      </div>-->
<!--      <div class="accordion-content">-->
<!--        <ul>-->
<!--          {% for facility in university.facilities.all %}-->
<!--            <li>{{ facility.name }}</li>-->
<!--          {% empty %}-->
<!--            <li class="text-gray-400">No facilities listed.</li>-->
<!--          {% endfor %}-->
<!--        </ul>-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="accordion-section">-->
<!--      <div class="accordion-header">-->
<!--        Nearby PGs-->
<!--        <span class="accordion-icon">+</span>-->
<!--      </div>-->
<!--      <div class="accordion-content">-->
<!--        <label for="genderFilter" class="block mb-2 text-white font-semibold">Filter by Gender:</label>-->
<!--        <select id="genderFilter" onchange="filterPGs()" class="dark-input w-full md:w-auto">-->
<!--          <option value="All">All</option>-->
<!--          <option value="Male">Male</option>-->
<!--          <option value="Female">Female</option>-->
<!--          <option value="Unisex">Unisex</option>-->
<!--        </select>-->

<!--        {% for pg in university.pgs.all %}-->
<!--          <div class="pg" data-gender="{{ pg.gender }}">-->
<!--            <strong>{{ pg.name }}</strong><br>-->
<!--            Address: {{ pg.address }}<br>-->
<!--            Rent: ₹{{ pg.rent }}<br>-->
<!--            Gender: {{ pg.gender }}<br>-->
<!--            Food: {{ pg.food }}<br>-->
<!--            Contact: {{ pg.contact }}<br>-->
<!--            Facilities:-->
<!--            <ul>-->
<!--              {% for f in pg.facilities.all %}-->
<!--                <li>-->
<!--                  {% if "bed" in f.name|lower %}🛏️{% elif "food" in f.name|lower %}🍽️-->
<!--                  {% elif "wifi" in f.name|lower %}📶{% elif "laundry" in f.name|lower %}🧺-->
<!--                  {% elif "ac" in f.name|lower %}❄️{% endif %}-->
<!--                  {{ f.name }}-->
<!--                </li>-->
<!--              {% endfor %}-->
<!--            </ul>-->

<!--            {% if university.latitude and university.longitude and pg.latitude and pg.longitude %}-->
<!--              <a href="http://maps.google.com/maps?saddr={{ university.latitude }},{{ university.longitude }}&daddr={{ pg.latitude }},{{ pg.longitude }}"-->
<!--                 target="_blank" class="map-link">-->
<!--                📍 View Location-->
<!--              </a>-->
<!--            {% endif %}-->
<!--          </div>-->
<!--        {% empty %}-->
<!--          <p class="text-gray-400 mt-4">No PGs listed.</p>-->
<!--        {% endfor %}-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="accordion-section">-->
<!--      <div class="accordion-header">-->
<!--        Top Recruiters-->
<!--        <span class="accordion-icon">+</span>-->
<!--      </div>-->
<!--      <div class="accordion-content">-->
<!--        <ul>-->
<!--          {% for recruiter in university.recruiters.all %}-->
<!--            <li>{{ recruiter.name }}</li>-->
<!--          {% empty %}-->
<!--            <li class="text-gray-400">No recruiters listed.</li>-->
<!--          {% endfor %}-->
<!--        </ul>-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="accordion-section">-->
<!--      <div class="accordion-header">-->
<!--        Placement Record-->
<!--        <span class="accordion-icon">+</span>-->
<!--      </div>-->
<!--      <div class="accordion-content">-->
<!--        {% if university.placement_record %}-->
<!--          <ul>-->
<!--            <li><strong>Average Salary:</strong> {{ university.placement_record.average_salary }}</li>-->
<!--            <li><strong>Placement Percentage:</strong> {{ university.placement_record.placement_percentage }}</li>-->
<!--          </ul>-->
<!--        {% else %}-->
<!--          <p class="text-gray-400">No placement record available.</p>-->
<!--        {% endif %}-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="accordion-section">-->
<!--      <div class="accordion-header">-->
<!--        Restaurants Nearby-->
<!--        <span class="accordion-icon">+</span>-->
<!--      </div>-->
<!--      <div class="accordion-content">-->
<!--        <ul>-->
<!--          {% for restaurant in university.restaurants.all %}-->
<!--            <li>{{ restaurant.name }}</li>-->
<!--          {% empty %}-->
<!--            <li class="text-gray-400">No restaurants listed.</li>-->
<!--          {% endfor %}-->
<!--        </ul>-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="accordion-section">-->
<!--      <div class="accordion-header">-->
<!--        Hangout Places Nearby-->
<!--        <span class="accordion-icon">+</span>-->
<!--      </div>-->
<!--      <div class="accordion-content">-->
<!--        <ul>-->
<!--          {% for hangout in university.hangouts.all %}-->
<!--            <li>{{ hangout.name }}</li>-->
<!--          {% empty %}-->
<!--            <li class="text-gray-400">No hangouts listed.</li>-->
<!--          {% endfor %}-->
<!--        </ul>-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="accordion-section">-->
<!--      <div class="accordion-header">-->
<!--        Transport Access-->
<!--        <span class="accordion-icon">+</span>-->
<!--      </div>-->
<!--      <div class="accordion-content">-->
<!--        <ul>-->
<!--          {% for transport in university.transports.all %}-->
<!--            <li>{{ transport.type }}: {{ transport.distance }}</li>-->
<!--          {% empty %}-->
<!--            <li class="text-gray-400">No transport info available.</li>-->
<!--          {% endfor %}-->
<!--        </ul>-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="accordion-section">-->
<!--      <div class="accordion-header">-->
<!--        Student Reviews-->
<!--        <span class="accordion-icon">+</span>-->
<!--      </div>-->
<!--      <div class="accordion-content">-->
<!--        {% for review in university.reviews.all %}-->
<!--          <div class="review">-->
<!--            <strong>{{ review.user_name }}</strong> (Rating: {{ review.rating }}/5)<br>-->
<!--            {{ review.text }}-->
<!--          </div>-->
<!--        {% empty %}-->
<!--          <p class="text-gray-400">No reviews yet.</p>-->
<!--        {% endfor %}-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="mt-10 flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">-->
<!--      <a href="{% url 'listofuniversities' %}" class="btn-primary py-3 px-6 font-bold">← Back to University List</a>-->
<!--      <a href="{% url 'university_register' university.pk %}" class="btn-primary py-3 px-6 font-bold bg-green-600 hover:bg-green-700">Register</a>-->
<!--    </div>-->

<!--</div>-->

<!--<a href="https://wa.me/919390352252?text=Hello%20CollegeClue%2C%20I%20have%20a%20question%20about%20a%20university."-->
<!--   class="whatsapp-button"-->
<!--   target="_blank"-->
<!--   rel="noopener noreferrer">-->
<!--  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/1200px-WhatsApp.svg.png" alt="WhatsApp Chat" />-->
<!--</a>-->


<!--<script>-->
<!--  // Accordion Logic-->
<!--  const headers = document.querySelectorAll('.accordion-header');-->
<!--  headers.forEach(header => {-->
<!--    header.addEventListener('click', () => {-->
<!--      const content = header.nextElementSibling;-->
<!--      const icon = header.querySelector('.accordion-icon');-->
<!--      const isVisible = content.style.display === 'block';-->
<!--      document.querySelectorAll('.accordion-content').forEach(c => {-->
<!--        if (c !== content && c.style.display === 'block') {-->
<!--          c.style.display = 'none';-->
<!--          c.previousElementSibling.classList.remove('open');-->
<!--          c.previousElementSibling.querySelector('.accordion-icon').textContent = '+';-->
<!--        }-->
<!--      });-->
<!--      if (isVisible) {-->
<!--        content.style.display = 'none';-->
<!--        header.classList.remove('open');-->
<!--        icon.textContent = '+';-->
<!--      } else {-->
<!--        content.style.display = 'block';-->
<!--        header.classList.add('open');-->
<!--        icon.textContent = '−';-->
<!--      }-->
<!--    });-->
<!--  });-->

<!--  // PG Filter Logic-->
<!--  function filterPGs() {-->
<!--    const selected = document.getElementById("genderFilter").value;-->
<!--    document.querySelectorAll(".pg").forEach(pg => {-->
<!--      const gender = pg.getAttribute("data-gender");-->
<!--      pg.style.display = (selected === "All" || gender === selected) ? "block" : "none";-->
<!--    });-->
<!--  }-->

<!--  // Wishlist Logic-->
<!--  const wishlistBtn = document.getElementById('wishlist-btn');-->
<!--  if (wishlistBtn) {-->
<!--    const universityId = wishlistBtn.getAttribute('data-university-id');-->
<!--    const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;-->
<!--    const iconSpan = document.getElementById('wishlist-icon');-->
<!--    const textSpan = document.getElementById('wishlist-text');-->

<!--    function updateButtonAppearance(isInWishlist) {-->
<!--      if (isInWishlist) {-->
<!--        iconSpan.innerHTML = '<i class="fa-solid fa-heart"></i>';-->
<!--        textSpan.textContent = 'In Wishlist';-->
<!--        wishlistBtn.classList.add('wished');-->
<!--      } else {-->
<!--        iconSpan.innerHTML = '<i class="fa-regular fa-heart"></i>';-->
<!--        textSpan.textContent = 'Add to Wishlist';-->
<!--        wishlistBtn.classList.remove('wished');-->
<!--      }-->
<!--    }-->

<!--    function setLoadingState(isLoading) {-->
<!--      wishlistBtn.disabled = isLoading;-->
<!--      if (isLoading) {-->
<!--        iconSpan.innerHTML = '<div class="loading-spinner"></div>';-->
<!--        textSpan.textContent = 'Processing...';-->
<!--      }-->
<!--    }-->

<!--    async function checkWishlistStatus() {-->
<!--      try {-->
<!--        const response = await fetch(`/check-wishlist-status/${universityId}/`, {-->
<!--          headers: { 'X-CSRFToken': csrftoken }-->
<!--        });-->
<!--        if (response.ok) {-->
<!--          const data = await response.json();-->
<!--          updateButtonAppearance(data.in_wishlist);-->
<!--        }-->
<!--      } catch (error) {-->
<!--        console.error('Error checking wishlist status:', error);-->
<!--      }-->
<!--    }-->

<!--    wishlistBtn.addEventListener('click', async () => {-->
<!--      setLoadingState(true);-->
<!--      const isCurrentlyInWishlist = wishlistBtn.classList.contains('wished');-->
<!--      const url = isCurrentlyInWishlist ? "{% url 'remove_from_wishlist' %}" : "{% url 'add_to_wishlist' %}";-->

<!--      try {-->
<!--        const response = await fetch(url, {-->
<!--          method: 'POST',-->
<!--          headers: {-->
<!--            'Content-Type': 'application/json',-->
<!--            'X-CSRFToken': csrftoken,-->
<!--          },-->
<!--          body: JSON.stringify({ university_id: universityId })-->
<!--        });-->

<!--        if (response.ok) {-->
<!--          updateButtonAppearance(!isCurrentlyInWishlist);-->
<!--        } else {-->
<!--          alert('Error: Could not update wishlist');-->
<!--          updateButtonAppearance(isCurrentlyInWishlist);-->
<!--        }-->
<!--      } catch (error) {-->
<!--        console.error('Error:', error);-->
<!--        alert('An error occurred while updating the wishlist.');-->
<!--        updateButtonAppearance(isCurrentlyInWishlist);-->
<!--      } finally {-->
<!--        setLoadingState(false);-->
<!--      }-->
<!--    });-->

<!--    document.addEventListener('DOMContentLoaded', checkWishlistStatus);-->
<!--  }-->

<!--  // -&#45;&#45; NEW: COUNTDOWN TIMER SCRIPT -&#45;&#45;-->
<!--  const deadlineContainer = document.querySelector('.deadline-container');-->
<!--  if (deadlineContainer) {-->
<!--    const deadline = new Date(deadlineContainer.getAttribute('data-deadline'));-->
<!--    const countdownElement = document.getElementById('countdown');-->

<!--    const timerInterval = setInterval(() => {-->
<!--      const now = new Date().getTime();-->
<!--      const distance = deadline - now;-->

<!--      if (distance < 0) {-->
<!--        clearInterval(timerInterval);-->
<!--        countdownElement.innerHTML = '<div class="deadline-passed">Registration Closed</div>';-->
<!--        return;-->
<!--      }-->

<!--      const days = Math.floor(distance / (1000 * 60 * 60 * 24));-->
<!--      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));-->
<!--      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));-->
<!--      const seconds = Math.floor((distance % (1000 * 60)) / 1000);-->

<!--      countdownElement.innerHTML = `-->
<!--        <div class="time-block">-->
<!--            <div class="time-value">${String(days).padStart(2, '0')}</div>-->
<!--            <div class="time-label">Days</div>-->
<!--        </div>-->
<!--        <div class="time-block">-->
<!--            <div class="time-value">${String(hours).padStart(2, '0')}</div>-->
<!--            <div class="time-label">Hours</div>-->
<!--        </div>-->
<!--        <div class="time-block">-->
<!--            <div class="time-value">${String(minutes).padStart(2, '0')}</div>-->
<!--            <div class="time-label">Minutes</div>-->
<!--        </div>-->
<!--        <div class="time-block">-->
<!--            <div class="time-value">${String(seconds).padStart(2, '0')}</div>-->
<!--            <div class="time-label">Seconds</div>-->
<!--        </div>-->
<!--      `;-->
<!--    }, 1000);-->
<!--  }-->
<!--  // -&#45;&#45; END OF NEW SCRIPT -&#45;&#45;-->

<!--</script>-->

<!--</body>-->
<!--</html>-->





<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ university.name }} - CollegeClue</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap');

    /* Consistent Body Styles */
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      color: #e0e0e0;
      font-weight: 500;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 30%, #0f3460 70%, #533483 100%);
      min-height: 100vh;
    }

    /* Consistent Navigation Styles */
    .nav-bar {
        background-color: rgba(30, 41, 59, 0.95);
        -webkit-backdrop-filter: blur(8px);
        backdrop-filter: blur(8px);
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        border-bottom: 1px solid rgba(75, 85, 99, 1);
    }

    /* Custom Button Styles */
    .btn-primary {
        background: linear-gradient(135deg, #2d3748 0%, #4a5568 50%, #1a202c 100%);
        background-size: 200% 200%;
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        position: relative;
        overflow: hidden;
        border-radius: 0.625rem;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        color: white;
    }

    .btn-primary::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
        transition: left 0.6s;
    }

    .btn-primary:hover::before {
        left: 100%;
    }

    .btn-primary:hover {
        background-position: 100% 0;
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 15px 35px rgba(45, 55, 72, 0.4);
    }

    /* Input/Select styling for dark theme */
    .dark-input {
        background-color: #2d3748;
        color: #e0e0e0;
        border: 1px solid #4a5568;
        padding: 0.5rem 0.75rem;
        border-radius: 0.375rem;
    }
    .dark-input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.5);
    }

    /* Accordion Custom Styles */
    .accordion-section {
        background: #2d3748;
        border-radius: 0.75rem;
        margin-bottom: 1rem;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        border: 1px solid #4a5568;
        overflow: hidden;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .accordion-section:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 25px -5px rgba(0, 0, 0, 0.2), 0 6px 10px -3px rgba(0, 0, 0, 0.1);
    }

    .accordion-header {
        padding: 1rem 1.5rem;
        cursor: pointer;
        font-weight: 600;
        color: #ffffff;
        background-color: #1a202c;
        border-bottom: 1px solid #4a5568;
        user-select: none;
        transition: background-color 0.3s ease;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 1.125rem;
    }

    .accordion-header:hover {
        background-color: #2d3748;
    }

    .accordion-header.open .accordion-icon {
        transform: rotate(90deg);
    }

    .accordion-icon {
        transition: transform 0.3s ease;
        font-size: 1.5rem;
        line-height: 1;
    }

    .accordion-content {
        padding: 1rem 1.5rem;
        display: none;
        color: #e0e0e0;
    }

    /* Styles for lists inside accordions */
    .accordion-content ul {
      padding-left: 1.25rem;
      list-style-type: disc;
      margin: 0;
    }
    .accordion-content li {
        margin-bottom: 0.5rem;
    }
    .accordion-content li:last-child {
        margin-bottom: 0;
    }

    .pg, .review {
      padding: 1rem;
      background-color: #1a202c;
      border: 1px solid #2d3748;
      border-radius: 0.5rem;
      margin-top: 1rem;
      color: #e0e0e0;
    }

    .pg strong, .review strong {
        color: #ffffff;
    }
    .pg ul {
      list-style-type: none;
      padding-left: 0;
      margin-top: 0.5rem;
    }
    .pg ul li {
        margin-bottom: 0.25rem;
    }

    .map-link {
        display: inline-block;
        margin-top: 0.75rem;
        padding: 0.5rem 1rem;
        background-color: #667eea;
        color: white;
        border-radius: 0.375rem;
        text-decoration: none;
        transition: background-color 0.3s ease;
        font-weight: 600;
    }

    .map-link:hover {
        background-color: #764ba2;
    }

    a {
      color: #667eea;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    /* University Title */
    .university-title {
        font-weight: 800;
        text-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    /* WhatsApp Button Styles */
    .whatsapp-button {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #25D366;
        color: white;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        z-index: 1000;
        text-decoration: none;
    }

    .whatsapp-button:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    }

    .whatsapp-button img {
        width: 35px;
        height: 35px;
    }

    /* Wishlist Button Styles */
    #wishlist-btn {
        background: linear-gradient(135deg, #e05e5e 0%, #d43f3f 100%);
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 0.625rem;
        font-weight: 600;
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        cursor: pointer;
        border: none;
    }
    #wishlist-btn:hover {
        transform: translateY(-2px) scale(1.03);
        box-shadow: 0 8px 12px rgba(0,0,0,0.3);
    }
    #wishlist-btn:active {
        animation: click-pop 0.15s ease-in-out;
    }
    #wishlist-btn .fa-heart {
        font-size: 1.25rem;
        transition: transform 0.2s ease-in-out;
    }
    #wishlist-btn.wished .fa-heart {
        transform: scale(1.1);
    }

    @keyframes click-pop {
        0% { transform: scale(1); }
        50% { transform: scale(0.95); }
        100% { transform: scale(1); }
    }

    .top-section-header {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin-bottom: 2rem;
      gap: 1.5rem;
    }

    @media (min-width: 768px) {
      .top-section-header {
        flex-direction: row;
        justify-content: space-between;
      }
    }

    .university-info {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .loading-spinner {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid #ffffff;
      border-radius: 50%;
      border-top-color: transparent;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* --- DEADLINE COUNTDOWN STYLES --- */
    .deadline-container {
        background: rgba(15, 52, 96, 0.6); /* #0f3460 with transparency */
        border: 1px solid #4a5568;
        border-radius: 0.75rem;
        padding: 1.5rem;
        margin-bottom: 2rem;
        text-align: center;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(5px);
        animation: fadeIn 1s ease-out;
    }

    .deadline-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: #e0e0e0;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
    }

    .countdown-timer {
        display: flex;
        justify-content: center;
        gap: 1rem;
    }

    .time-block {
        display: flex;
        flex-direction: column;
        align-items: center;
        background-color: #1a202c;
        padding: 0.75rem 1rem;
        border-radius: 0.5rem;
        min-width: 70px;
        box-shadow: inset 0 2px 4px rgba(0,0,0,0.5);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .time-block:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 15px rgba(0,0,0,0.3);
    }

    .time-value {
        font-size: 2.25rem;
        font-weight: 700;
        color: #ffffff;
        line-height: 1.2;
    }

    .time-label {
        font-size: 0.875rem;
        font-weight: 500;
        color: #a0aec0;
        text-transform: uppercase;
    }

    .deadline-passed {
        font-size: 1.5rem;
        font-weight: 700;
        color: #e53e3e; /* Red for emphasis */
        animation: pulse 1.5s infinite;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
    }

    /* --- START: NEW ALUMNI STYLES (Add this section) --- */
    .alumni-item {
        background-color: #1a202c;
        padding: 0.75rem 1.25rem;
        border-radius: 0.5rem;
        margin-bottom: 0.75rem;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.2s ease;
        font-weight: 600;
    }
    .alumni-item:hover {
        background-color: #0f3460;
        transform: translateX(5px);
    }
    .alumni-modal {
        display: none; /* Hidden by default */
        position: fixed;
        z-index: 1001;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0,0,0,0.6);
        align-items: center;
        justify-content: center;
    }
    .alumni-modal-content {
        background: #16213e;
        margin: auto;
        padding: 2rem;
        border: 1px solid #4a5568;
        width: 90%;
        max-width: 500px;
        border-radius: 0.75rem;
        position: relative;
        box-shadow: 0 15px 30px rgba(0,0,0,0.4);
        animation: fadeIn 0.5s;
        text-align: center;
    }
    .alumni-modal-close-btn {
        color: #aaa;
        position: absolute;
        top: 10px;
        right: 20px;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
    }
    .alumni-modal-close-btn:hover {
        color: #fff;
    }
    .alumni-modal-img {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        object-cover: cover;
        border: 3px solid #667eea;
        margin-bottom: 1rem;
    }
    .alumni-modal-testimonial {
        font-style: italic;
        color: #a0aec0;
        margin-top: 1rem;
        padding: 1rem;
        background: #1a202c;
        border-left: 3px solid #667eea;
        border-radius: 0.25rem;
    }
    .linkedin-btn {
        display: inline-block;
        margin-top: 1.5rem;
        background-color: #0077b5;
        color: white;
        padding: 0.6rem 1.2rem;
        border-radius: 0.5rem;
        font-weight: 600;
        transition: background-color 0.3s ease;
    }
    .linkedin-btn:hover {
        background-color: #005582;
    }
    /* --- END: NEW ALUMNI STYLES --- */

  </style>
</head>
<body class="page-gradient-bg">

<nav class="nav-bar h-16 flex items-center justify-between px-4 sm:px-6 lg:px-8">
    <div class="flex items-center">
        <h1 class="text-2xl font-bold text-white">CollegeClue</h1>
    </div>
    <div class="flex items-center space-x-4">
        <a href="/my-wishlists" class="text-white text-xl md:text-2xl" title="My Wishlists">
          <i class="fa-solid fa-heart"></i>
        </a>
    </div>
</nav>

<div class="max-w-4xl mx-auto px-4 py-8">
    <div class="top-section-header">
        <div class="university-info">
            <img src="{{ university.image_url }}" alt="{{ university.name }}" class="w-28 h-28 rounded-full object-cover shadow-lg border-2 border-white mb-4">
            <h2 class="text-4xl sm:text-5xl university-title text-white text-center">{{ university.name }}</h2>
        </div>
        <div>
            {% if user.is_authenticated %}
                <button id="wishlist-btn" data-university-id="{{ university.pk }}">
                    <span id="wishlist-icon"><i class="fa-regular fa-heart"></i></span>
                    <span id="wishlist-text">Add to Wishlist</span>
                </button>
            {% else %}
                <a href="{% url 'account_login' %}" class="btn-primary py-3 px-6 font-bold">
                    Login to Add to Wishlist
                </a>
            {% endif %}
        </div>
    </div>

    {% csrf_token %}

    {% if university.registration_deadline %}
    <div class="deadline-container" data-deadline="{{ university.registration_deadline|date:'c' }}">
      <div class="deadline-title">
        <i class="fa-solid fa-hourglass-half"></i>
        <span>Registration Closes In</span>
      </div>
      <div id="countdown" class="countdown-timer">
        </div>
    </div>
    {% endif %}
    <div class="accordion-section">
      <div class="accordion-header">
        Basic Info
        <span class="accordion-icon">+</span>
      </div>
      <div class="accordion-content">
        <ul>
          <li><strong>Location:</strong> {{ university.location }}</li>
          <li><strong>Accreditation:</strong> {{ university.accreditation }}</li>
          <li><strong>Type:</strong> {{ university.type }}</li>
          <li><strong>Campus Size:</strong> {{ university.campus_size }}</li>
          <li><strong>Tuition:</strong> {{ university.tuition }}</li>
          <li><strong>Established:</strong> {{ university.established_year }}</li>
          <li><strong>Undergraduate Enrollment:</strong> {{ university.undergraduate_enrollment }}</li>
          <li><strong>Graduate Enrollment:</strong> {{ university.graduate_enrollment }}</li>
          <li><strong>Average Salary:</strong> {{ university.average_salary }}</li>
          <li><strong>Study Abroad Programs:</strong> {{ university.study_abroad_programs|yesno:"Yes,No" }}</li>
          <li><strong>Financial Aid Available:</strong> {{ university.financial_aid_available|yesno:"Yes,No" }}</li>
          <li><strong>Website:</strong> <a href="{{ university.website }}" target="_blank">{{ university.website }}</a></li>
        </ul>
      </div>
    </div>

    <div class="accordion-section">
      <div class="accordion-header">
        Courses Offered
        <span class="accordion-icon">+</span>
      </div>
      <div class="accordion-content">
        <ul>
          {% for course in university.courses.all %}
            <li>{{ course.course_name }}</li>
          {% empty %}
            <li class="text-gray-400">No courses listed.</li>
          {% endfor %}
        </ul>
      </div>
    </div>

    <div class="accordion-section">
      <div class="accordion-header">
        Campus Facilities
        <span class="accordion-icon">+</span>
      </div>
      <div class="accordion-content">
        <ul>
          {% for facility in university.facilities.all %}
            <li>{{ facility.name }}</li>
          {% empty %}
            <li class="text-gray-400">No facilities listed.</li>
          {% endfor %}
        </ul>
      </div>
    </div>

    <div class="accordion-section">
      <div class="accordion-header">
        Notable Alumni
        <span class="accordion-icon">+</span>
      </div>
      <div class="accordion-content">
        <div id="alumni-list">
          {% for alumni in university.alumni.all %}
            <div class="alumni-item"
     data-name="{{ alumni.name }}"
     data-image="{{ alumni.image.url }}"
     data-year="{{ alumni.graduation_year }}"
     data-company="{{ alumni.current_company }}"
     data-position="{{ alumni.current_position }}"
     data-testimonial="{{ alumni.testimonial }}"
     data-linkedin="{{ alumni.linkedin_profile_url }}">

    <span>{{ alumni.name }}</span>
    <span class="text-gray-400 text-sm font-normal">{{ alumni.current_company }}</span>

</div>
          {% empty %}
            <p class="text-gray-400">No notable alumni listed yet.</p>
          {% endfor %}
        </div>
      </div>
    </div>
    <div class="accordion-section">
      <div class="accordion-header">
        Nearby PGs
        <span class="accordion-icon">+</span>
      </div>
      <div class="accordion-content">
        <label for="genderFilter" class="block mb-2 text-white font-semibold">Filter by Gender:</label>
        <select id="genderFilter" onchange="filterPGs()" class="dark-input w-full md:w-auto">
          <option value="All">All</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
          <option value="Unisex">Unisex</option>
        </select>

        {% for pg in university.pgs.all %}
          <div class="pg" data-gender="{{ pg.gender }}">
            <strong>{{ pg.name }}</strong><br>
            Address: {{ pg.address }}<br>
            Rent: ₹{{ pg.rent }}<br>
            Gender: {{ pg.gender }}<br>
            Food: {{ pg.food }}<br>
            Contact: {{ pg.contact }}<br>
            Facilities:
            <ul>
              {% for f in pg.facilities.all %}
                <li>
                  {% if "bed" in f.name|lower %}🛏️{% elif "food" in f.name|lower %}🍽️
                  {% elif "wifi" in f.name|lower %}📶{% elif "laundry" in f.name|lower %}🧺
                  {% elif "ac" in f.name|lower %}❄️{% endif %}
                  {{ f.name }}
                </li>
              {% endfor %}
            </ul>

            {% if university.latitude and university.longitude and pg.latitude and pg.longitude %}
              <a href="http://maps.google.com/maps?saddr={{ university.latitude }},{{ university.longitude }}&daddr={{ pg.latitude }},{{ pg.longitude }}"
                 target="_blank" class="map-link">
                📍 View Location
              </a>
            {% endif %}
          </div>
        {% empty %}
          <p class="text-gray-400 mt-4">No PGs listed.</p>
        {% endfor %}
      </div>
    </div>

    <div class="accordion-section">
      <div class="accordion-header">
        Top Recruiters
        <span class="accordion-icon">+</span>
      </div>
      <div class="accordion-content">
        <ul>
          {% for recruiter in university.recruiters.all %}
            <li>{{ recruiter.name }}</li>
          {% empty %}
            <li class="text-gray-400">No recruiters listed.</li>
          {% endfor %}
        </ul>
      </div>
    </div>

    <div class="accordion-section">
      <div class="accordion-header">
        Placement Record
        <span class="accordion-icon">+</span>
      </div>
      <div class="accordion-content">
        {% if university.placement_record %}
          <ul>
            <li><strong>Average Salary:</strong> {{ university.placement_record.average_salary }}</li>
            <li><strong>Placement Percentage:</strong> {{ university.placement_record.placement_percentage }}</li>
          </ul>
        {% else %}
          <p class="text-gray-400">No placement record available.</p>
        {% endif %}
      </div>
    </div>

    <div class="accordion-section">
      <div class="accordion-header">
        Restaurants Nearby
        <span class="accordion-icon">+</span>
      </div>
      <div class="accordion-content">
        <ul>
          {% for restaurant in university.restaurants.all %}
            <li>{{ restaurant.name }}</li>
          {% empty %}
            <li class="text-gray-400">No restaurants listed.</li>
          {% endfor %}
        </ul>
      </div>
    </div>

    <div class="accordion-section">
      <div class="accordion-header">
        Hangout Places Nearby
        <span class="accordion-icon">+</span>
      </div>
      <div class="accordion-content">
        <ul>
          {% for hangout in university.hangouts.all %}
            <li>{{ hangout.name }}</li>
          {% empty %}
            <li class="text-gray-400">No hangouts listed.</li>
          {% endfor %}
        </ul>
      </div>
    </div>

    <div class="accordion-section">
      <div class="accordion-header">
        Transport Access
        <span class="accordion-icon">+</span>
      </div>
      <div class="accordion-content">
        <ul>
          {% for transport in university.transports.all %}
            <li>{{ transport.type }}: {{ transport.distance }}</li>
          {% empty %}
            <li class="text-gray-400">No transport info available.</li>
          {% endfor %}
        </ul>
      </div>
    </div>

    <div class="accordion-section">
      <div class="accordion-header">
        Student Reviews
        <span class="accordion-icon">+</span>
      </div>
      <div class="accordion-content">
        {% for review in university.reviews.all %}
          <div class="review">
            <strong>{{ review.user_name }}</strong> (Rating: {{ review.rating }}/5)<br>
            {{ review.text }}
          </div>
        {% empty %}
          <p class="text-gray-400">No reviews yet.</p>
        {% endfor %}
      </div>
    </div>

    <div class="mt-10 flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
      <a href="{% url 'listofuniversities' %}" class="btn-primary py-3 px-6 font-bold">← Back to University List</a>
      <a href="{% url 'university_register' university.pk %}" class="btn-primary py-3 px-6 font-bold bg-green-600 hover:bg-green-700">Register</a>
    </div>

</div>

<div id="alumni-modal" class="alumni-modal">
  <div class="alumni-modal-content">
    <span class="alumni-modal-close-btn">&times;</span>
    <img id="alumni-modal-img" src="" alt="Alumni Photo" class="alumni-modal-img mx-auto">
    <h3 id="alumni-modal-name" class="text-2xl font-bold text-white mt-4"></h3>
    <p class="text-gray-400">
      <span id="alumni-modal-position"></span> at <span id="alumni-modal-company"></span>
    </p>
    <p class="text-gray-500 text-sm">Graduated: <span id="alumni-modal-year"></span></p>
    <blockquote id="alumni-modal-testimonial" class="alumni-modal-testimonial text-left"></blockquote>
    <a id="alumni-modal-linkedin" href="#" target="_blank" rel="noopener noreferrer" class="linkedin-btn">
      <i class="fab fa-linkedin"></i> View Profile
    </a>
  </div>
</div>
<a href="https://wa.me/919390352252?text=Hello%20CollegeClue%2C%20I%20have%20a%20question%20about%20a%20university."
   class="whatsapp-button"
   target="_blank"
   rel="noopener noreferrer">
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/1200px-WhatsApp.svg.png" alt="WhatsApp Chat" />
</a>


<script>
  // Accordion Logic
  const headers = document.querySelectorAll('.accordion-header');
  headers.forEach(header => {
    header.addEventListener('click', () => {
      const content = header.nextElementSibling;
      const icon = header.querySelector('.accordion-icon');
      const isVisible = content.style.display === 'block';
      document.querySelectorAll('.accordion-content').forEach(c => {
        if (c !== content && c.style.display === 'block') {
          c.style.display = 'none';
          c.previousElementSibling.classList.remove('open');
          c.previousElementSibling.querySelector('.accordion-icon').textContent = '+';
        }
      });
      if (isVisible) {
        content.style.display = 'none';
        header.classList.remove('open');
        icon.textContent = '+';
      } else {
        content.style.display = 'block';
        header.classList.add('open');
        icon.textContent = '−';
      }
    });
  });

  // PG Filter Logic
  function filterPGs() {
    const selected = document.getElementById("genderFilter").value;
    document.querySelectorAll(".pg").forEach(pg => {
      const gender = pg.getAttribute("data-gender");
      pg.style.display = (selected === "All" || gender === selected) ? "block" : "none";
    });
  }

  // Wishlist Logic
  const wishlistBtn = document.getElementById('wishlist-btn');
  if (wishlistBtn) {
    const universityId = wishlistBtn.getAttribute('data-university-id');
    const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;
    const iconSpan = document.getElementById('wishlist-icon');
    const textSpan = document.getElementById('wishlist-text');

    function updateButtonAppearance(isInWishlist) {
      if (isInWishlist) {
        iconSpan.innerHTML = '<i class="fa-solid fa-heart"></i>';
        textSpan.textContent = 'In Wishlist';
        wishlistBtn.classList.add('wished');
      } else {
        iconSpan.innerHTML = '<i class="fa-regular fa-heart"></i>';
        textSpan.textContent = 'Add to Wishlist';
        wishlistBtn.classList.remove('wished');
      }
    }

    function setLoadingState(isLoading) {
      wishlistBtn.disabled = isLoading;
      if (isLoading) {
        iconSpan.innerHTML = '<div class="loading-spinner"></div>';
        textSpan.textContent = 'Processing...';
      }
    }

    async function checkWishlistStatus() {
      try {
        const response = await fetch(`/check-wishlist-status/${universityId}/`, {
          headers: { 'X-CSRFToken': csrftoken }
        });
        if (response.ok) {
          const data = await response.json();
          updateButtonAppearance(data.in_wishlist);
        }
      } catch (error) {
        console.error('Error checking wishlist status:', error);
      }
    }

    wishlistBtn.addEventListener('click', async () => {
      setLoadingState(true);
      const isCurrentlyInWishlist = wishlistBtn.classList.contains('wished');
      const url = isCurrentlyInWishlist ? "{% url 'remove_from_wishlist' %}" : "{% url 'add_to_wishlist' %}";

      try {
        const response = await fetch(url, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': csrftoken,
          },
          body: JSON.stringify({ university_id: universityId })
        });

        if (response.ok) {
          updateButtonAppearance(!isCurrentlyInWishlist);
        } else {
          alert('Error: Could not update wishlist');
          updateButtonAppearance(isCurrentlyInWishlist);
        }
      } catch (error) {
        console.error('Error:', error);
        alert('An error occurred while updating the wishlist.');
        updateButtonAppearance(isCurrentlyInWishlist);
      } finally {
        setLoadingState(false);
      }
    });

    document.addEventListener('DOMContentLoaded', checkWishlistStatus);
  }

  // --- DEADLINE TIMER SCRIPT ---
  const deadlineContainer = document.querySelector('.deadline-container');
  if (deadlineContainer) {
    const deadline = new Date(deadlineContainer.getAttribute('data-deadline'));
    const countdownElement = document.getElementById('countdown');

    const timerInterval = setInterval(() => {
      const now = new Date().getTime();
      const distance = deadline - now;

      if (distance < 0) {
        clearInterval(timerInterval);
        countdownElement.innerHTML = '<div class="deadline-passed">Registration Closed</div>';
        return;
      }

      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);

      countdownElement.innerHTML = `
        <div class="time-block">
            <div class="time-value">${String(days).padStart(2, '0')}</div>
            <div class="time-label">Days</div>
        </div>
        <div class="time-block">
            <div class="time-value">${String(hours).padStart(2, '0')}</div>
            <div class="time-label">Hours</div>
        </div>
        <div class="time-block">
            <div class="time-value">${String(minutes).padStart(2, '0')}</div>
            <div class="time-label">Minutes</div>
        </div>
        <div class="time-block">
            <div class="time-value">${String(seconds).padStart(2, '0')}</div>
            <div class="time-label">Seconds</div>
        </div>
      `;
    }, 1000);
  }

  // --- START: NEW ALUMNI MODAL SCRIPT (Add this) ---
  const alumniModal = document.getElementById('alumni-modal');
  if (alumniModal) {
    const alumniItems = document.querySelectorAll('.alumni-item');
    const closeModalBtn = document.querySelector('.alumni-modal-close-btn');

    // Function to close the modal
    const closeModal = () => {
      alumniModal.style.display = 'none';
    };

    // Open modal and populate data when an alumni item is clicked
    alumniItems.forEach(item => {
      item.addEventListener('click', () => {
        const data = item.dataset;
        document.getElementById('alumni-modal-img').src = data.image;
        document.getElementById('alumni-modal-name').textContent = data.name;
        document.getElementById('alumni-modal-position').textContent = data.position;
        document.getElementById('alumni-modal-company').textContent = data.company;
        document.getElementById('alumni-modal-year').textContent = data.year;
        document.getElementById('alumni-modal-testimonial').textContent = `"${data.testimonial}"`;

        const linkedinBtn = document.getElementById('alumni-modal-linkedin');
        if (data.linkedin) {
            linkedinBtn.href = data.linkedin;
            linkedinBtn.style.display = 'inline-block';
        } else {
            linkedinBtn.style.display = 'none';
        }

        alumniModal.style.display = 'flex';
      });
    });

    // Close modal event listeners
    closeModalBtn.addEventListener('click', closeModal);
    window.addEventListener('click', (event) => {
      if (event.target === alumniModal) {
        closeModal();
      }
    });
  }
  // --- END: NEW ALUMNI MODAL SCRIPT ---

</script>

</body>
</html>